function _extends(){return(_extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}).apply(this,arguments)}var CustomSelect=function(t){var i={block:"custom-select",hideCallback:!1,includeValue:!1,keyboard:!0,modifier:!1,placeholder:!1,search:!1,showCallback:!1,transition:0},e=function(){function e(e,o){this._$select=t(e),this._options=_extends({},i,"object"==typeof o?o:{}),this._activeModifier=this._options.block+"--active",this._dropupModifier=this._options.block+"--dropup",this._optionSelectedModifier=this._options.block+"__option--selected",this._keydown=this._keydown.bind(this),this._dropup=this._dropup.bind(this),this._outside=this._outside.bind(this),this._init()}var o=e.prototype;return o.reset=function(){this._$dropdown.hide().empty(),this._$value.off("click"),this._fill()},o._init=function(){this._$element=t('<div class="'+this._options.block+'">\n           <button class="'+this._options.block+"__option "+this._options.block+'__option--value" type="button"></button>\n           <div class="'+this._options.block+'__dropdown" style="display: none;"></div>\n         </div>'),this._$select.hide().after(this._$element),this._options.modifier&&this._$element.addClass(this._options.modifier),this._$value=this._$element.find("."+this._options.block+"__option--value"),this._$dropdown=this._$element.find("."+this._options.block+"__dropdown"),this._fill()},o._fill=function(){var i=this;this._$values=this._$select.find("option"),this._values=[];var e=this._options.placeholder;t.each(this._$values,function(e,o){var s=t(o).text().trim();i._values.push(s)}),e&&(this._$select.find("[selected]").length?e=!1:(this._$value.html(e),this._$select.prop("selectedIndex",-1))),t.each(this._values,function(o,s){var n=i._$values.eq(o).attr("class"),l=t('<button class="'+i._options.block+'__option" type="button">'+s+"</button>"),a=i._$select.find(":selected");i._$values.eq(o).attr("disabled")&&l.prop("disabled",!0),!a.length&&0===o||s===a.text().trim()?(e||i._$value.text(s).removeClass(i._$value.data("class")).removeData("class").addClass(n).data("class",n),(i._options.includeValue||e)&&(l.addClass(n),l.toggleClass(i._optionSelectedModifier,i._$values.eq(o).is("[selected]")),i._$dropdown.append(l))):(l.addClass(n),i._$dropdown.append(l))}),this._$options=this._$dropdown.find("."+this._options.block+"__option"),this._options.search&&this._search(),this._$value.one("click",function(t){i._show(t)}),this._$value.prop("disabled",!this._$options.length),this._$options.on("click",function(t){i._select(t)})},o._show=function(i){var e=this;i.preventDefault(),this._dropup(),t(window).on("resize scroll",this._dropup),this._$element.addClass(this._activeModifier),this._$dropdown.slideDown(this._options.transition,function(){e._options.search&&(e._$input.focus(),e._options.includeValue&&e._scroll()),"function"==typeof e._options.showCallback&&e._options.showCallback.call(e._$element[0])}),setTimeout(function(){t(document).on("touchstart click",e._outside)},0),this._$value.one("click",function(t){t.preventDefault(),e._hide()}),this._options.keyboard&&(this._options.index=-1,t(window).on("keydown",this._keydown))},o._hide=function(){var i=this;this._options.search&&(this._$input.val("").blur(),this._$options.show(),this._$wrap.scrollTop(0)),this._$dropdown.slideUp(this._options.transition,function(){i._$element.removeClass(i._activeModifier).removeClass(i._dropupModifier),"function"==typeof i._options.hideCallback&&i._options.hideCallback.call(i._$element[0]),i._$value.off("click").one("click",function(t){i._show(t)}),t(document).off("touchstart click",i._outside),t(window).off("resize scroll",i._dropup)}),this._options.keyboard&&(this._$options.blur(),t(window).off("keydown",this._keydown))},o._scroll=function(){var i=this;t.each(this._$options,function(e,o){var s=t(o);if(s.text()===i._$value.text()){var n=s.position().top,l=i._$wrap.outerHeight()/2-s.outerHeight()/2;return n>l&&i._$wrap.scrollTop(n-l),!1}})},o._select=function(i){var e=this;i.preventDefault();var o=t(i.currentTarget).text().trim(),s=[].concat(this._values);if(this._$value.text(o).removeClass(this._$value.data("class")),this._$values.prop("selected",!1),t.each(s,function(i,n){e._options.includeValue||n!==o||s.splice(i,1),t.each(e._$values,function(i,s){var n=t(s);if(n.text().trim()===o){var l=n.attr("class");n.prop("selected",!0),e._$value.addClass(l).data("class",l)}})}),this._hide(),this._options.includeValue)this._$options.removeClass(this._optionSelectedModifier),t.each(this._$options,function(i,s){var n=t(s);if(n.text().trim()===o)return n.addClass(e._optionSelectedModifier),!1});else{if(this._$options.length>s.length){var n=this._$options.eq(s.length);n.remove(),this._$options=this._$options.not(n),this._$options.length||this._$value.prop("disabled",!0)}t.each(this._$options,function(i,o){var n=t(o);n.text(s[i]),n.attr("class",e._options.block+"__option"),t.each(e._$values,function(){var e=t(this);e.text().trim()===s[i]&&(n.addClass(e.attr("class")),n.prop("disabled",e.prop("disabled")))})})}void 0!==i.originalEvent&&this._$select.trigger("change")},o._search=function(){var i=this;this._$input=t('<input class="'+this._options.block+'__input" autocomplete="off">'),this._$dropdown.prepend(this._$input),this._$options.wrapAll('<div class="'+this._options.block+'__option-wrap"></div>'),this._$wrap=this._$element.find("."+this._options.block+"__option-wrap"),this._$input.on("focus",function(){i._options.index=-1}),this._$input.on("keyup",function(){var e=i._$input.val().trim();e.length?(i._$wrap.scrollTop(0),setTimeout(function(){e===i._$input.val().trim()&&t.each(i._$options,function(i,o){var s=t(o),n=-1!==s.text().trim().toLowerCase().indexOf(e.toLowerCase());s.toggle(n)})},300)):i._$options.show()})},o._dropup=function(){var i=this._$element[0].getBoundingClientRect().bottom,e=t(window).height()-i<this._$dropdown.height();this._$element.toggleClass(this._dropupModifier,e)},o._outside=function(i){var e=t(i.target);e.parents().is(this._$element)||e.is(this._$element)||this._hide()},o._keydown=function(t){var i=this._$options.filter(":visible").not("[disabled]");switch(t.which){case 40:t.preventDefault(),i.eq(this._options.index+1).length?this._options.index+=1:this._options.index=0,i.eq(this._options.index).focus();break;case 38:t.preventDefault(),i.eq(this._options.index-1).length&&this._options.index-1>=0?this._options.index-=1:this._options.index=i.length-1,i.eq(this._options.index).focus();break;case 13:case 32:if(!this._$input||!this._$input.is(":focus")){t.preventDefault();var e=this._$options.add(this._$value).filter(":focus");e.trigger("click"),e.is(this._$value)||this._$select.trigger("change"),this._$value.focus()}break;case 27:t.preventDefault(),this._hide(),this._$value.focus()}},e._jQueryPlugin=function(i){return this.each(function(){var o=t(this),s=o.data("custom-select");s?"reset"===i&&s.reset():"string"!=typeof i&&(s=new e(this,i),o.data("custom-select",s))})},e}();return t.fn.customSelect=e._jQueryPlugin,t.fn.customSelect.noConflict=function(){return t.fn.customSelect},e}($);